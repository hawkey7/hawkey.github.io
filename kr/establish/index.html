<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>以太经典</title>

    <!-- Bootstrap -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/dist/css/vendor.min.css" rel="stylesheet">
    <link href="/dist/css/bundle-establish.min.css?v=1526539720463" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
     <header id="header">
      <div class="navbar-wrapper"> 
        <div class="container">
          <nav class="navbar navbar-expand-sm navbar-light">
            <a class="navbar-brand" href="/kr/"><img src="/dist/resources/images/toplogo.svg" alt="" class="header-logo"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                  <a class="nav-link" href="/news/?lang=ko">뉴스</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/forums-kr/">게시판</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/kr/resource/">소스</a>
                </li>
                <li class="nav-item">
                  <div class="language_box language_box-off">
                    <img src="/dist/resources/images/korea.jpeg" alt="">
                    <svg width="13px" height="6px" viewBox="0 0 13 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="C_homepage-down" transform="translate(-1307.000000, -32.000000)" fill="#FFFFFF"><g id="Group-3" transform="translate(120.000000, 7.000000)"><polygon id="Triangle-2" transform="translate(1193.500000, 28.000000) scale(1, -1) translate(-1193.500000, -28.000000) " points="1193.5 25 1200 31 1187 31"></polygon></g></g></g></svg>
                    <ul>
                      <li><a href="/establish/"><img src="/dist/resources/images/ch.png" alt=""></a></li>
                      <li><a href="/jp/establish/"><img src="/dist/resources/images/jp.jpeg" alt=""></a></li>
                    </ul>
                  </div>  
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <main class="establish">
        <div class="container">
          <p>ERC20표준 인터페이스는 아래와 같다:</p>
          <pre class="code">
contract ERC20 { 
    function name() constant returns (string name) 
    function symbol() constant returns (string symbol) 
    function decimals() constant returns (uint8 decimals) 
    function totalSupply() constant returns (uint totalSupply); 
    function balanceOf(address _owner) constant returns (uint balance); 
    function transfer(address _to, uint _value) returns (bool success); 
    function transferFrom(address _from, address _to, uint _value) returns (bool success); 
    function approve(address _spender, uint _value) returns (bool success); 
    function allowance(address _owner, address _spender) constant returns (uint remaining); 
    event Transfer(address indexed _from, address indexed _to, uint _value); 
    event Approval(address indexed _owner, address indexed _spender, uint _value); 
}</pre>
          <h4><b>name</b></h4>
          <p>ERC20토큰명 리턴, 예를 들면 “My test token”</p>
          <h4><b>symbol</b></h4>
          <p>토큰 약칭 리턴, 예를 들면 : MTT, 즉 거래소에서 노출되는 토큰의 약칭</p>
          <h4><b>decimals</b></h4>
          <p>토큰이 사용하는 소수점 뒷자리수 리턴, 예를 들면 : 3으로 세팅 시, 0.001형식의 표시를 지원함.</p>
          <h4><b>totalSupply</b></h4>
          <p>총 토큰 제공 수 리턴</p>
          <h4><b>balanceOf</b></h4>
          <p>주소(계좌)의 잔액 리턴</p>
          <h4><b>transfer</b></h4>
          <p>토큰 프로토콜의 사용자 주소에서 _value 수량의 토큰을 도착지 주소_to로 이동할 시,  반드시Transfer사건을 촉발함.</p>
          <h4><b>transferFrom</b></h4>
          <p>주소_from에서 _value 수량의 토큰을_to로 발송 시, 반드시Transfer사건을 촉발해야 함.</p>
          <p>transferFrom방법은 계약서 대리인이 토큰 이동을 허락하나, 그 조건은from계좌가 반드시  approve를 받아야 함. 이 부분은 뒤에서 다시 설명함.</p>
          <h4><b>approve</b></h4>
          <p>_spender 로 여러번 개좌를 되찾는건 허락하나, 최고 금액은_value임. 만약 이 함수를 중복 사용 시, 이는  현재 잔액를 _value로 커버함.</p>
          <h4><b>allowance</b></h4>
          <p>_owner에서 여전히 출금 가능한 _spender의 금액 리턴.</p>
          <p>마지막부분의 3가지 방법에 대한 이해가 어려울 수 있어 보충설명 해 드립니다.</p>
          <p>approve는 제3자(예를 들면 서비스 프로토콜)에게 권한을 부여하여, 발송자 계좌에서 토큰을 이동할 수 있으며, transferFrom()함수를 통하여 구체적인 이동을 진행함.</p>
          <p>A계좌에 있는 1000개ETC 중 100개를 B계좌에서 자유롭게 사용할 수 있게 하는 프로세스는 아래와 같다.</p>
          <ul>
            <li>A계좌가 아래 형식에 맞춰서approve함수approve(B,100)를 사용함</li>
            <li>B계좌가 100개의ETC 중 10개를 C계좌로 보내려면transferFrom(A, C, 10)를 사용해야 함</li>
            <li>allowance(A, B)를 사용하여B계좌에서 A계좌의 토큰을 몇개까지 사용이 가능한지 확인할 수 있음.</li>
          </ul>
          <!-- <p>另外，我推荐这篇文章，对这部分概念讲解的比较清楚。</p> -->
          <!-- <p><a href="https://mp.weixin.qq.com/s/foM1QWvsqGTdHxHTmjczsw" target="_blank"><i>https://mp.weixin.qq.com/s/foM1QWvsqGTdHxHTmjczsw</i></a>（编者按：亦见文末超链接《科普 | 释放阻塞的以太坊交易》）</p>
          <p>后面两个是事件，事件是为了获取日志方便提供的。前者是在代币被转移时触发，后者是在调用approve方法时触发。</p> -->
          <h4 class="title">ERC20기반으로 코딩된 토큰 프로토콜</h4>
          <pre class="code">
pragma solidity ^0.4.16;
contract Token{
  uint256 public totalSupply;

  function balanceOf(address _owner) public constant returns (uint256 balance);
  function transfer(address _to, uint256 _value) public returns (bool success);
  function transferFrom(address _from, address _to, uint256 _value) public returns (bool success);

  function approve(address _spender, uint256 _value) public returns (bool success);

  function allowance(address _owner, address _spender) public constant returns (uint256 remaining);

  event Transfer(address indexed _from, address indexed _to, uint256 _value);
  event Approval(address indexed _owner, address indexed _spender, uint256_value);
}

contract TokenDemo is Token {

  string public name; //명칭，예를 들면"My test token"
  uint8 public decimals; //토큰이 사용하는 소수점 뒷자리수 리턴, 예를 들면 : 3으로 세팅 시, 0.001표시 지원
  string public symbol; //token약칭,예를 들면 MTT

  function TokenDemo(uint256 _initialAmount, string _tokenName, uint8 _decimalUnits, string _tokenSymbol) public {
    totalSupply = _initialAmount * 10 ** uint256(_decimalUnits); // 최초 총량 설정
    balances[msg.sender] = totalSupply; // 토큰 최초 수량관련 소식은 발송자에게 전달하며, 구조함수이기때문에 여기서도 프로토콜의 창립자임.

    name = _tokenName; 
    decimals = _decimalUnits; 
    symbol = _tokenSymbol;
  }

  function transfer(address _to, uint256 _value) public returns (bool success) {
    //최대수치를 초과할 수 없음(2^256 - 1)
    //시간이 지남에 따라 다른 토큰이 생성되는데 이러한 토큰이 넘쳐나는걸 막기 위해 아래 코드를 사용함
    require(balances[msg.sender] >= _value && balances[_to] + _value > balances[_to]);
    require(_to != 0x0);
    balances[msg.sender] -= _value;//소식발송자 계좌에서 _value만큼의 토큰을 감소.
    balances[_to] += _value;//코인 접수자 계좌에 _value수량의 토큰 증가
    Transfer(msg.sender, _to, _value);//토큰거래 사건 촉발
    return true;
  }


  function transferFrom(address _from, address _to, uint256 _value) public returns (bool success) {
    require(balances[_from] >= _value && allowed[_from][msg.sender] >= _value);
    balances[_to] += _value;//코인 접수자 계좌에 _value수량의 토큰 증가
    balances[_from] -= _value; //지출계좌_from에서 토큰수량 _value 감소
    allowed[_from][msg.sender] -= _value;//소식 발송자는 _from에서 _value 만큼 감소 가능
    Transfer(_from, _to, _value);//거래사건 촉발
    return true;
  }
  function balanceOf(address _owner) public constant returns (uint256 balance) {
    return balances[_owner];
  }


  function approve(address _spender, uint256 _value) public returns (bool success) { 
    allowed[msg.sender][_spender] = _value;
    Approval(msg.sender, _spender, _value);
    return true;
  }

  function allowance(address _owner, address _spender) public constant returns (uint256 remaining) {
    return allowed[_owner][_spender];//_spender이 _owner에서 지출할 수 있는 토큰 수
  }
  mapping (address => uint256) balances;
  mapping (address => mapping (address => uint256)) allowed;
}</pre>
          <p>name，totalSupply 등이 여기서 왜 방법이 아닌 속성 변수가 되었냐는 의문이 있을 수 있는데 이는solidity가 자동으로public변수를 동일 명칭인getter인터페이스를 생성시키기 때문이다.</p>
          <h4 class="title">설정테스트</h4>
          <p>아래는 설정 테스트 프로세스이다:</p>
          <p>첫째: solcjs 또는 solc로 프로토콜 코딩, 상세내용은 아래 이미지와 같다.</p>
          <img src="/dist/resources/images/code1.png" alt="">          
          <p>둘째: 아래 코드를 세팅 및 운행, token_abi의 수치는 코딩 후abi파일의 내용과 같다. </p>
          <p>token_code 수치는 코딩 후의 이진법 내용이다. 즉bin의 파일 내용 중from은 프로토콜 설치 주소이고 해당 계좌의 잔액을 확보하며, 예를 들어 이미지 1과 같은 버그 발생 시, 계좌를 언락해야 한다. 상세내요은 이미지 2 참조.  </p>
          <pre class="code">
token_abi = [
  {"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},
  {"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
  {"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},
  {"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
  {"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},
  {"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},
  {"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},
  {"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},
  {"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},
  {"inputs":[{"name":"_initialAmount","type":"uint256"},{"name":"_tokenName","type":"string"},{"name":"_decimalUnits","type":"uint8"},{"name":"_tokenSymbol","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},
  {"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},
  {"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},
  {"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},
  {"indexed":true,"name":"_spender","type":"address"},
  {"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}
] 

test_token = web3.eth.contract(token_abi) 
token_code = '0x608060405234801561001057600080fd5b50604051610735380380610735833981016040908152815160208084015183850151606086015160ff8216600a0a85026000818155600160a060020a0333168152600486529690962095909555908501805193959094919391019161007a916001918601906100a7565b506002805460ff191660ff8416179055805161009d9060039060208401906100a7565b5050505050610142565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100e857805160ff1916838001178555610115565b82800160010185558215610115579182015b828111156101155782518255916020019190600101906100fa565b50610121929150610125565b5090565b61013f91905b80821115610121576000815560010161012b565b90565b6105e4806101516000396000f3006080604052600436106100985763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde03811461009d578063095ea7b31461012757806318160ddd1461015f57806323b872dd14610186578063313ce567146101b057806370a08231146101db57806395d89b41146101fc578063a9059cbb14610211578063dd62ed3e14610235575b600080fd5b3480156100a957600080fd5b506100b261025c565b6040805160208082528351818301528351919283929083019185019080838360005b838110156100ec5781810151838201526020016100d4565b50505050905090810190601f1680156101195780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561013357600080fd5b5061014b600160a060020a03600435166024356102e9565b604080519115158252519081900360200190f35b34801561016b57600080fd5b50610174610353565b60408051918252519081900360200190f35b34801561019257600080fd5b5061014b600160a060020a0360043581169060243516604435610359565b3480156101bc57600080fd5b506101c561043d565b6040805160ff9092168252519081900360200190f35b3480156101e757600080fd5b50610174600160a060020a0360043516610446565b34801561020857600080fd5b506100b2610461565b34801561021d57600080fd5b5061014b600160a060020a03600435166024356104bc565b34801561024157600080fd5b50610174600160a060020a036004358116906024351661058d565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156102e15780601f106102b6576101008083540402835291602001916102e1565b820191906000526020600020905b8154815290600101906020018083116102c457829003601f168201915b505050505081565b600160a060020a03338116600081815260056020908152604080832094871680845294825280832086905580518681529051929493927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a350600192915050565b60005481565b600160a060020a03831660009081526004602052604081205482118015906103a75750600160a060020a03808516600090815260056020908152604080832033909416835292905220548211155b15156103b257600080fd5b600160a060020a03808416600081815260046020908152604080832080548801905588851680845281842080548990039055600583528184203390961684529482529182902080548790039055815186815291519293927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35060019392505050565b60025460ff1681565b600160a060020a031660009081526004602052604090205490565b6003805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156102e15780601f106102b6576101008083540402835291602001916102e1565b600160a060020a03331660009081526004602052604081205482118015906104fd5750600160a060020a038316600090815260046020526040902054828101115b151561050857600080fd5b600160a060020a038316151561051d57600080fd5b600160a060020a03338116600081815260046020908152604080832080548890039055938716808352918490208054870190558351868152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a350600192915050565b600160a060020a039182166000908152600560209081526040808320939094168252919091522054905600a165627a7a7230582016464ed0c4d48736761517a8ae4c3f126efa298a7d5cfc6d819a7513ec3383ab0029' 

instance = test_token.new({from: '0x547f0a45c12f9428e5aa060fb259c20616cd74a0', data: token_code, gas: 3000000}, function (e, contract){     
  console.log(e, contract);     
  if (typeof contract.address !== 'undefined') {          
    console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);     
  }  
})</pre>  
          <img src="/dist/resources/images/code2.png" alt="">
          <p class="text-center">이미지 1</p>
          <img src="/dist/resources/images/code3.png" alt="">  
          <p class="text-center">이미지 2</p>        
          <p>셋째: 세팅 성공 후 아래와 같은 내용을 얻을 수 있다.</p> 
          <img src="/dist/resources/images/code4.png" alt="">
        </div>
    </main>
    <div class="footer kr-footer">
      <div class="container">
        <img src="/dist/resources/images/bottomlogo.svg" alt="" class="footer-logo">
        <div class="subscribe">
          <div id="mc_embed_signup">
            <form action="https://ethereumclassicasia.us18.list-manage.com/subscribe/post?u=cf36498d3fc32e7bc9dfc6052&amp;id=d898a0a72e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
              <div id="mc_embed_signup_scroll">
                <div class="mc-field-group">
                  <input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="email">
                </div>
                <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>                
              </div>
              <div id="mce-responses" class="clear">
                  <div class="response" id="mce-error-response" style="display:none"></div>
                  <div class="response" id="mce-success-response" style="display:none"></div>
                </div>
            </form>
          </div>
        </div>
        <div class="footer-content row justify-content-start">
          <div class="col-sm-3 resource-links">
            <h4>소스</h4>
            <ul>
              <li><a href="javascript:;" id="whitePaper">백서</a></li>
              <li><a href="javascript:;" id="guide">ETC안내서</a></li>
              <li><a href="javascript:;" id="faq">FAQ</a></li>
            </ul>
          </div>
          <div class="col-sm-6 friend-links">
            <h4>관련 링크</h4>
            <ul>
              <!-- <li><a href="#" target="_blank">ETC INCUBATOR</a></li> -->
              <li><a href="https://www.etcdevteam.com" target="_blank">ETCDEV</a></li>
              <li><a href="https://etccooperative.org" target="_blank">ECC</a></li>
            </ul>
          </div>
          <div class="col-sm-3 social-links">
            <ul>
              <li>
                <a href="https://open.kakao.com/o/gUNOv0K" target="_blank">Kakao Talk</a>
              </li>
              <li>
                <a href="javascript:;">@etckorea</a>
              </li>
              <!-- <li>
                <a href="https://t.me/joinchat/GqAqlRC9hD5bVy65DuHcfg" target="_blank">Telegram</a>
              </li> -->
              <li>
                <a href="https://github.com/ethereumproject" target="_blank">Github</a>
              </li>
              <!-- <li>
                <a href="javascript:;">공식 QQ 그룹 769408114</a>
              </li>
              <li>
                <a href="http://t.me/etczh" target="_blank">Telegram</a>
              </li>
              <li>
                <a href="https://github.com/ethereumproject/explorer" target="_blank">Github</a>
              </li> -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="/dist/js/vendor.min.js" ></script>
  <script src="/dist/js/bundle-resource.min.js?v=1526539720463" ></script>
  <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script>
  <script type='text/javascript'>
  (function($) {
    window.fnames = new Array(); 
    window.ftypes = new Array();
    fnames[0]='EMAIL';
    ftypes[0]='email';
    fnames[1]='FNAME';
    ftypes[1]='text';
    fnames[2]='LNAME';
    ftypes[2]='text';
    fnames[3]='ADDRESS';
    ftypes[3]='address';
    fnames[4]='PHONE';
    ftypes[4]='phone';
  }(jQuery));
  var $mcj = jQuery.noConflict(true);
  </script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-118864224-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-118864224-1');
  </script>
</html>